<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Consulta Categoría</title>
</head>
<body>
  <h1>Consulta tu Categoría</h1>
  <input type="text" id="rut" placeholder="Ingresa tu RUT">
  <button onclick="buscar()">Buscar</button>
  <p id="resultado"></p>

  <script>
    function validarRut(rut) {
        // Valida formato: 12345678-9
        return /^[0-9]+-[0-9kK]$/.test(rut);
    }
/*
    async function buscar() {
        const rut = document.getElementById("rut").value.trim();
        const resultado = document.getElementById("resultado");

        try {
            const res = await fetch("https://script.google.com/macros/s/AKfycbxU2iEE99DEhWdb8uhYAnvrC_zGr1QWVYCy9db6pYL84Y5Pwc7ExOmYFSR0L6aIkQJg/exec?rut=" + encodeURIComponent(rut));
            const data = await res.json();

            if (data.error) {
            resultado.textContent = data.error;
            } else {
            resultado.textContent = "Categoría: " + data.categoria;
            }
        } catch (e) {
            resultado.textContent = "Error consultando la base de datos";
        }
    }


    function mostrar(data) {
        document.getElementById("resultado").textContent =
        data.error ? data.error : "Categoría: " + data.categoria;
    }*/
   function mostrar(data) {
    document.getElementById("resultado").textContent = data.error ? data.error : "Categoría: " + data.categoria;
  }

  function buscar() {
    const rut = document.getElementById("rut").value.trim();
    const script = document.createElement("script");
    script.src = "https://script.google.com/macros/s/AKfycbxU2iEE99DEhWdb8uhYAnvrC_zGr1QWVYCy9db6pYL84Y5Pwc7ExOmYFSR0L6aIkQJg/exec?rut=" + encodeURIComponent(rut) + "&callback=mostrar";
    document.body.appendChild(script);
  }
  </script>
</body>
</html>
